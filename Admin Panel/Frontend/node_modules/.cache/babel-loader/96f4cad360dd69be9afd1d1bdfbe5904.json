{"ast":null,"code":"import { registerAction, registerInteraction } from '@antv/g2';\nimport { get, isArray } from '@antv/util';\nimport { DrillDownAction } from './actions/drill-down';\n/**\n * 判断是否为父节点\n */\nexport function isParentNode(context) {\n  var data = get(context, ['event', 'data', 'data'], {});\n  return isArray(data.children) && data.children.length > 0;\n}\n/**\n * 判断是否在中心\n */\nfunction inCenter(context) {\n  var coordinate = context.view.getCoordinate();\n  var innerRadius = coordinate.innerRadius;\n  if (innerRadius) {\n    var _a = context.event,\n      x = _a.x,\n      y = _a.y;\n    var _b = coordinate.center,\n      centerX = _b.x,\n      centerY = _b.y;\n    var r = coordinate.getRadius() * innerRadius;\n    var distance = Math.sqrt(Math.pow(centerX - x, 2) + Math.pow(centerY - y, 2));\n    return distance < r;\n  }\n  return false;\n}\nregisterAction('drill-down-action', DrillDownAction);\nregisterInteraction('drill-down', {\n  showEnable: [{\n    trigger: 'element:mouseenter',\n    action: 'cursor:pointer',\n    isEnable: isParentNode\n  }, {\n    trigger: 'element:mouseleave',\n    action: 'cursor:default'\n  },\n  // 中心处，肯定会触发 element:mouseleave 操作\n  {\n    trigger: 'element:mouseleave',\n    action: 'cursor:pointer',\n    isEnable: inCenter\n  }],\n  start: [{\n    trigger: 'element:click',\n    isEnable: isParentNode,\n    action: ['drill-down-action:click']\n  }, {\n    trigger: 'afterchangesize',\n    action: ['drill-down-action:resetPosition']\n  }, {\n    // 点击中心，返回上一层\n    trigger: 'click',\n    isEnable: inCenter,\n    action: ['drill-down-action:back']\n  }]\n});","map":null,"metadata":{},"sourceType":"module"}