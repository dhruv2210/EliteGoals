{"ast":null,"code":"import { getTextWidth, getTextHeight, assembleFont } from '../util/text';\nexport default function (shape) {\n  var attrs = shape.attr();\n  var x = attrs.x,\n    y = attrs.y,\n    text = attrs.text,\n    fontSize = attrs.fontSize,\n    lineHeight = attrs.lineHeight;\n  var font = attrs.font;\n  if (!font) {\n    // 如果未组装 font\n    font = assembleFont(attrs);\n  }\n  var width = getTextWidth(text, font);\n  var bbox;\n  if (!width) {\n    // 如果width不存在，四点共其实点\n    bbox = {\n      x: x,\n      y: y,\n      width: 0,\n      height: 0\n    };\n  } else {\n    var textAlign = attrs.textAlign,\n      textBaseline = attrs.textBaseline;\n    var height = getTextHeight(text, fontSize, lineHeight); // attrs.height\n    // 默认左右对齐：left, 默认上下对齐 bottom\n    var point = {\n      x: x,\n      y: y - height\n    };\n    if (textAlign) {\n      if (textAlign === 'end' || textAlign === 'right') {\n        point.x -= width;\n      } else if (textAlign === 'center') {\n        point.x -= width / 2;\n      }\n    }\n    if (textBaseline) {\n      if (textBaseline === 'top') {\n        point.y += height;\n      } else if (textBaseline === 'middle') {\n        point.y += height / 2;\n      }\n    }\n    bbox = {\n      x: point.x,\n      y: point.y,\n      width: width,\n      height: height\n    };\n  }\n  return bbox;\n}","map":null,"metadata":{},"sourceType":"module"}