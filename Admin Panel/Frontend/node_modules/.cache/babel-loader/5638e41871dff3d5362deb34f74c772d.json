{"ast":null,"code":"import { __spreadArrays } from \"tslib\";\nimport { get, isFunction } from '@antv/util';\nimport { animation, interaction, scale, state, theme, tooltip } from '../../adaptor/common';\nimport { point } from '../../adaptor/geometries';\nimport { deepAssign, flow } from '../../utils';\nimport { WORD_CLOUD_COLOR_FIELD } from './constant';\nimport { transform } from './utils';\n/**\n * geometry 配置处理\n * @param params\n */\nfunction geometry(params) {\n  var chart = params.chart,\n    options = params.options;\n  var colorField = options.colorField,\n    color = options.color;\n  var data = transform(params);\n  chart.data(data);\n  var p = deepAssign({}, params, {\n    options: {\n      xField: 'x',\n      yField: 'y',\n      seriesField: colorField && WORD_CLOUD_COLOR_FIELD,\n      rawFields: isFunction(color) && __spreadArrays(get(options, 'rawFields', []), ['datum']),\n      point: {\n        color: color,\n        shape: 'word-cloud'\n      }\n    }\n  });\n  var ext = point(p).ext;\n  ext.geometry.label(false);\n  chart.coordinate().reflect('y');\n  chart.axis(false);\n  return params;\n}\n/**\n * meta 配置\n * @param params\n */\nfunction meta(params) {\n  return flow(scale({\n    x: {\n      nice: false\n    },\n    y: {\n      nice: false\n    }\n  }))(params);\n}\n/**\n * 词云图 legend 配置\n * @param params\n */\nexport function legend(params) {\n  var chart = params.chart,\n    options = params.options;\n  var legend = options.legend,\n    colorField = options.colorField;\n  if (legend === false) {\n    chart.legend(false);\n  } else if (colorField) {\n    chart.legend(WORD_CLOUD_COLOR_FIELD, legend);\n  }\n  return params;\n}\n/**\n * 词云图适配器\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n  // flow 的方式处理所有的配置到 G2 API\n  flow(geometry, meta, tooltip, legend, interaction, animation, theme, state)(params);\n}","map":null,"metadata":{},"sourceType":"module"}