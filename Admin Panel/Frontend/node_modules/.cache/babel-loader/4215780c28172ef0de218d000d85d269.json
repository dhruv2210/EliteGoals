{"ast":null,"code":"/**\n * @fileoverview pattern\n * @author dengfuping_develop@163.com\n */\nimport { uniqueId } from '@antv/util';\nimport { createSVGElement } from '../util/dom';\nvar regexPR = /^p\\s*\\(\\s*([axyn])\\s*\\)\\s*(.*)/i;\nvar Pattern = /** @class */function () {\n  function Pattern(cfg) {\n    this.cfg = {};\n    var el = createSVGElement('pattern');\n    el.setAttribute('patternUnits', 'userSpaceOnUse');\n    var child = createSVGElement('image');\n    el.appendChild(child);\n    var id = uniqueId('pattern_');\n    el.id = id;\n    this.el = el;\n    this.id = id;\n    this.cfg = cfg;\n    var arr = regexPR.exec(cfg);\n    var source = arr[2];\n    child.setAttribute('href', source);\n    var img = new Image();\n    if (!source.match(/^data:/i)) {\n      img.crossOrigin = 'Anonymous';\n    }\n    img.src = source;\n    function onload() {\n      el.setAttribute('width', \"\" + img.width);\n      el.setAttribute('height', \"\" + img.height);\n    }\n    if (img.complete) {\n      onload();\n    } else {\n      img.onload = onload;\n      // Fix onload() bug in IE9\n      img.src = img.src;\n    }\n    return this;\n  }\n  Pattern.prototype.match = function (type, attr) {\n    return this.cfg === attr;\n  };\n  return Pattern;\n}();\nexport default Pattern;","map":null,"metadata":{},"sourceType":"module"}