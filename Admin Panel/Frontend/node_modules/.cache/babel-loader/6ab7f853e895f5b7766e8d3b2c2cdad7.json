{"ast":null,"code":"import { deepMix, get, map } from '@antv/util';\n/**\n * @ignore\n * get the grid theme by type, will mix the common cfg of axis\n * @param theme\n * @param direction\n * @returns theme object\n */\nexport function getGridThemeCfg(theme, direction) {\n  var axisTheme = deepMix({}, get(theme, ['components', 'axis', 'common']), get(theme, ['components', 'axis', direction]));\n  return get(axisTheme, ['grid'], {});\n}\n/**\n * @ignore\n * get axis grid items\n * @param coordinate\n * @param scale\n * @param dim\n * @return items\n */\nexport function getLineGridItems(coordinate, scale, dim, alignTick) {\n  var items = [];\n  var ticks = scale.getTicks();\n  if (coordinate.isPolar) {\n    // 补全 ticks\n    ticks.push({\n      value: 1,\n      text: '',\n      tickValue: ''\n    });\n  }\n  ticks.reduce(function (preTick, currentTick, currentIndex) {\n    var currentValue = currentTick.value;\n    if (alignTick) {\n      items.push({\n        points: [coordinate.convert(dim === 'y' ? {\n          x: 0,\n          y: currentValue\n        } : {\n          x: currentValue,\n          y: 0\n        }), coordinate.convert(dim === 'y' ? {\n          x: 1,\n          y: currentValue\n        } : {\n          x: currentValue,\n          y: 1\n        })]\n      });\n    } else {\n      if (currentIndex) {\n        var preValue = preTick.value;\n        var middleValue = (preValue + currentValue) / 2;\n        items.push({\n          points: [coordinate.convert(dim === 'y' ? {\n            x: 0,\n            y: middleValue\n          } : {\n            x: middleValue,\n            y: 0\n          }), coordinate.convert(dim === 'y' ? {\n            x: 1,\n            y: middleValue\n          } : {\n            x: middleValue,\n            y: 1\n          })]\n        });\n      }\n    }\n    return currentTick;\n  }, ticks[0]);\n  return items;\n}\n/**\n * @ignore\n * get\n * @param coordinate\n * @param xScale\n * @param yScale\n * @param dim\n * @returns items\n */\nexport function getCircleGridItems(coordinate, xScale, yScale, alignTick, dim) {\n  var count = xScale.values.length;\n  var items = [];\n  var ticks = yScale.getTicks();\n  ticks.reduce(function (preTick, currentTick) {\n    var preValue = preTick ? preTick.value : currentTick.value; // 只有一项数据时取当前值\n    var currentValue = currentTick.value;\n    var middleValue = (preValue + currentValue) / 2;\n    if (dim === 'x') {\n      // 如果是 x 轴作为半径轴，那么只需要取圆弧收尾两个即可\n      items.push({\n        points: [coordinate.convert({\n          x: alignTick ? currentValue : middleValue,\n          y: 0\n        }), coordinate.convert({\n          x: alignTick ? currentValue : middleValue,\n          y: 1\n        })]\n      });\n    } else {\n      items.push({\n        points: map(Array(count + 1), function (__, idx) {\n          return coordinate.convert({\n            x: idx / count,\n            y: alignTick ? currentValue : middleValue\n          });\n        })\n      });\n    }\n    return currentTick;\n  }, ticks[0]);\n  return items;\n}\n/**\n * @ignore\n * show grid or not\n * @param axisTheme\n * @param axisOption\n */\nexport function showGrid(axisTheme, axisOption) {\n  var userGrid = get(axisOption, 'grid');\n  if (userGrid === null) {\n    return false;\n  }\n  var themeGrid = get(axisTheme, 'grid');\n  return !(userGrid === undefined && themeGrid === null);\n}","map":null,"metadata":{},"sourceType":"module"}