{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport ListState from './list-state';\nimport { isEqual } from '@antv/util';\nimport { TOOLTIP_CSS_CONST } from '@antv/component';\nimport { HtmlTooltip } from '../../../dependents';\nvar STATUS_SHOW = 'showRadio';\nvar TIP_ID = 'legend-radio-tip';\nvar ListRadio = /** @class */function (_super) {\n  __extends(ListRadio, _super);\n  function ListRadio() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.timeStamp = 0;\n    return _this;\n  }\n  ListRadio.prototype.show = function () {\n    var triggerInfo = this.getTriggerListInfo();\n    if (triggerInfo === null || triggerInfo === void 0 ? void 0 : triggerInfo.item) {\n      var list = triggerInfo.list,\n        item = triggerInfo.item;\n      list.setItemState(item, STATUS_SHOW, true);\n    }\n  };\n  ListRadio.prototype.hide = function () {\n    var triggerInfo = this.getTriggerListInfo();\n    if (triggerInfo === null || triggerInfo === void 0 ? void 0 : triggerInfo.item) {\n      var list = triggerInfo.list,\n        item = triggerInfo.item;\n      list.setItemState(item, STATUS_SHOW, false);\n    }\n  };\n  ListRadio.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n    this.tooltip && this.tooltip.destroy();\n  };\n  /**\n   * 显示 Tooltip (展示在上方)\n   * @returns\n   */\n  ListRadio.prototype.showTip = function () {\n    var context = this.context;\n    var ev = context.event;\n    var lastTimeStamp = this.timeStamp;\n    var timeStamp = +new Date();\n    var target = this.context.event.target;\n    if (timeStamp - lastTimeStamp > 16 && target.get('name') === 'legend-item-radio') {\n      var preLoc = this.location;\n      var curLoc = {\n        x: ev.x,\n        y: ev.y\n      };\n      this.timeStamp = timeStamp;\n      this.location = curLoc;\n      if (!preLoc || !isEqual(preLoc, curLoc)) {\n        this.showTooltip(curLoc);\n      }\n    }\n  };\n  /**\n   * 隐藏 Tooltip。\n   * @returns\n   */\n  ListRadio.prototype.hideTip = function () {\n    this.hideTooltip();\n    this.location = null;\n  };\n  ListRadio.prototype.showTooltip = function (curLoc) {\n    var context = this.context;\n    var ev = context.event;\n    var target = ev.target;\n    if (target && target.get('tip')) {\n      if (!this.tooltip) {\n        this.renderTooltip(); // 延迟生成\n      }\n      // 展示 tooltip\n      var _a = context.view.getCanvas().get('el').getBoundingClientRect(),\n        offsetX = _a.x,\n        offsetY = _a.y;\n      this.tooltip.update(__assign(__assign({\n        title: target.get('tip')\n      }, curLoc), {\n        x: curLoc.x + offsetX,\n        y: curLoc.y + offsetY\n      }));\n      this.tooltip.show();\n    }\n  };\n  ListRadio.prototype.hideTooltip = function () {\n    this.tooltip && this.tooltip.hide();\n  };\n  ListRadio.prototype.renderTooltip = function () {\n    var _a;\n    var tooltipStyles = (_a = {}, _a[TOOLTIP_CSS_CONST.CONTAINER_CLASS] = {\n      padding: '6px 8px',\n      transform: 'translate(-50%, -80%)',\n      background: 'rgba(0,0,0,0.75)',\n      color: '#fff',\n      'border-radius': '2px',\n      // 避免遮挡，如果还不够的话，再考虑开放用户配置\n      'z-index': 100\n    }, _a[TOOLTIP_CSS_CONST.TITLE_CLASS] = {\n      'font-size': '12px',\n      'line-height': '14px',\n      'margin-bottom': 0,\n      'word-break': 'break-all'\n    }, _a);\n    if (document.getElementById(TIP_ID)) {\n      document.body.removeChild(document.getElementById(TIP_ID));\n    }\n    var tooltip = new HtmlTooltip({\n      parent: document.body,\n      // tooltip 限制的区域\n      region: null,\n      visible: false,\n      crosshairs: null,\n      domStyles: tooltipStyles,\n      containerId: TIP_ID\n    });\n    tooltip.init();\n    tooltip.setCapture(false); // 不允许捕获事件\n    this.tooltip = tooltip;\n  };\n  return ListRadio;\n}(ListState);\nexport default ListRadio;","map":null,"metadata":{},"sourceType":"module"}