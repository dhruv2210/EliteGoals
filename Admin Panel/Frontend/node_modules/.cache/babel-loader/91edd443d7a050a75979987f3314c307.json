{"ast":null,"code":"import { BBox } from '../../../util/bbox';\nimport { isContrastColorWhite } from '../../../util/color';\nexport function adjustColor(items, labels, shapes) {\n  if (shapes.length === 0) {\n    return;\n  }\n  var element = shapes[0].get('element');\n  var theme = element.geometry.theme;\n  var _a = theme.labels || {},\n    fillColorLight = _a.fillColorLight,\n    fillColorDark = _a.fillColorDark;\n  shapes.forEach(function (shape, index) {\n    var label = labels[index];\n    var textShape = label.find(function (el) {\n      return el.get('type') === 'text';\n    });\n    var shapeBBox = BBox.fromObject(shape.getBBox());\n    var textBBox = BBox.fromObject(textShape.getCanvasBBox());\n    var overflow = !shapeBBox.contains(textBBox);\n    var bgColor = shape.attr('fill');\n    var fillWhite = isContrastColorWhite(bgColor);\n    if (!overflow) {\n      if (fillWhite) {\n        if (fillColorLight) {\n          textShape.attr('fill', fillColorLight);\n        }\n      } else {\n        if (fillColorDark) {\n          textShape.attr('fill', fillColorDark);\n        }\n      }\n    } else {\n      // 出现溢出直接应用 overflowLabel 样式\n      textShape.attr(theme.overflowLabels.style);\n    }\n  });\n}","map":null,"metadata":{},"sourceType":"module"}