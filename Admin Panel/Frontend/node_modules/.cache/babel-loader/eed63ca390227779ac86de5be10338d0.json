{"ast":null,"code":"/**\n * @fileoverview arrow\n * @author dengfuping_develop@163.com\n */\nimport { isArray, uniqueId } from '@antv/util';\nimport { createSVGElement } from '../util/dom';\nvar Arrow = /** @class */function () {\n  function Arrow(attrs, type) {\n    this.cfg = {};\n    var el = createSVGElement('marker');\n    var id = uniqueId('marker_');\n    el.setAttribute('id', id);\n    var shape = createSVGElement('path');\n    shape.setAttribute('stroke', attrs.stroke || 'none');\n    shape.setAttribute('fill', attrs.fill || 'none');\n    el.appendChild(shape);\n    el.setAttribute('overflow', 'visible');\n    el.setAttribute('orient', 'auto-start-reverse');\n    this.el = el;\n    this.child = shape;\n    this.id = id;\n    var cfg = attrs[type === 'marker-start' ? 'startArrow' : 'endArrow'];\n    this.stroke = attrs.stroke || '#000';\n    if (cfg === true) {\n      this._setDefaultPath(type, shape);\n    } else {\n      this.cfg = cfg; // when arrow config exists\n      this._setMarker(attrs.lineWidth, shape);\n    }\n    return this;\n  }\n  Arrow.prototype.match = function () {\n    return false;\n  };\n  Arrow.prototype._setDefaultPath = function (type, el) {\n    var parent = this.el;\n    // 默认箭头的边长为 10，夹角为 60 度\n    el.setAttribute('d', \"M0,0 L\" + 10 * Math.cos(Math.PI / 6) + \",5 L0,10\");\n    parent.setAttribute('refX', \"\" + 10 * Math.cos(Math.PI / 6));\n    parent.setAttribute('refY', \"\" + 5);\n  };\n  Arrow.prototype._setMarker = function (r, el) {\n    var parent = this.el;\n    var path = this.cfg.path;\n    var d = this.cfg.d;\n    if (isArray(path)) {\n      path = path.map(function (segment) {\n        return segment.join(' ');\n      }).join('');\n    }\n    el.setAttribute('d', path);\n    parent.appendChild(el);\n    if (d) {\n      parent.setAttribute('refX', \"\" + d / r);\n    }\n  };\n  Arrow.prototype.update = function (fill) {\n    var child = this.child;\n    if (child.attr) {\n      child.attr('fill', fill);\n    } else {\n      child.setAttribute('fill', fill);\n    }\n  };\n  return Arrow;\n}();\nexport default Arrow;","map":null,"metadata":{},"sourceType":"module"}