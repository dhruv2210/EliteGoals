{"ast":null,"code":"// 检测各边是否超出\nexport function getOutSides(x, y, width, height, limitBox) {\n  var hits = {\n    left: x < limitBox.x,\n    right: x + width > limitBox.x + limitBox.width,\n    top: y < limitBox.y,\n    bottom: y + height > limitBox.y + limitBox.height\n  };\n  return hits;\n}\nexport function getPointByPosition(x, y, offset, width, height, position) {\n  var px = x;\n  var py = y;\n  switch (position) {\n    case 'left':\n      // left center\n      px = x - width - offset;\n      py = y - height / 2;\n      break;\n    case 'right':\n      px = x + offset;\n      py = y - height / 2;\n      break;\n    case 'top':\n      px = x - width / 2;\n      py = y - height - offset;\n      break;\n    case 'bottom':\n      // bottom\n      px = x - width / 2;\n      py = y + offset;\n      break;\n    default:\n      // auto, 在 top-right\n      px = x + offset;\n      py = y - height - offset;\n      break;\n  }\n  return {\n    x: px,\n    y: py\n  };\n}\nexport function getAlignPoint(x, y, offset, width, height, position, limitBox) {\n  var point = getPointByPosition(x, y, offset, width, height, position);\n  if (limitBox) {\n    var outSides = getOutSides(point.x, point.y, width, height, limitBox);\n    if (position === 'auto') {\n      // 如果是 auto，默认 tooltip 在右上角，仅需要判定右侧和上测冲突即可\n      if (outSides.right) {\n        point.x = Math.max(0, x - width - offset);\n      }\n      if (outSides.top) {\n        point.y = Math.max(0, y - height - offset);\n      }\n    } else if (position === 'top' || position === 'bottom') {\n      if (outSides.left) {\n        // 左侧躲避\n        point.x = limitBox.x;\n      }\n      if (outSides.right) {\n        // 右侧躲避\n        point.x = limitBox.x + limitBox.width - width;\n      }\n      if (position === 'top' && outSides.top) {\n        // 如果上面对齐检测上面，不检测下面\n        point.y = y + offset;\n      }\n      if (position === 'bottom' && outSides.bottom) {\n        point.y = y - height - offset;\n      }\n    } else {\n      // 检测左右位置\n      if (outSides.top) {\n        point.y = limitBox.y;\n      }\n      if (outSides.bottom) {\n        point.y = limitBox.y + limitBox.height - height;\n      }\n      if (position === 'left' && outSides.left) {\n        point.x = x + offset;\n      }\n      if (position === 'right' && outSides.right) {\n        point.x = x - width - offset;\n      }\n    }\n  }\n  return point;\n}","map":null,"metadata":{},"sourceType":"module"}