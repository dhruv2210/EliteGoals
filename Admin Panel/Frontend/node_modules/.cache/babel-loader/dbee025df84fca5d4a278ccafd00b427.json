{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport { get } from '@antv/util';\nimport GroupComponent from '../abstract/group-component';\nimport Theme from '../util/theme';\nimport { pointsToBBox } from '../util/util';\nimport { renderTag } from '../util/graphic';\nvar DataRegionAnnotation = /** @class */function (_super) {\n  __extends(DataRegionAnnotation, _super);\n  function DataRegionAnnotation() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * 默认的配置项\n   * @returns {object} 默认的配置项\n   */\n  DataRegionAnnotation.prototype.getDefaultCfg = function () {\n    var cfg = _super.prototype.getDefaultCfg.call(this);\n    return __assign(__assign({}, cfg), {\n      name: 'annotation',\n      type: 'dataRegion',\n      locationType: 'points',\n      points: [],\n      lineLength: 0,\n      region: {},\n      text: {},\n      defaultCfg: {\n        region: {\n          style: {\n            lineWidth: 0,\n            fill: Theme.regionColor,\n            opacity: 0.4\n          }\n        },\n        text: {\n          content: '',\n          style: {\n            textAlign: 'center',\n            textBaseline: 'bottom',\n            fontSize: 12,\n            fill: Theme.textColor,\n            fontFamily: Theme.fontFamily\n          }\n        }\n      }\n    });\n  };\n  DataRegionAnnotation.prototype.renderInner = function (group) {\n    var regionStyle = get(this.get('region'), 'style', {});\n    var textStyle = get(this.get('text'), 'style', {});\n    var lineLength = this.get('lineLength') || 0;\n    var points = this.get('points');\n    if (!points.length) {\n      return;\n    }\n    var bbox = pointsToBBox(points);\n    // render region\n    var path = [];\n    path.push(['M', points[0].x, bbox.minY - lineLength]);\n    points.forEach(function (point) {\n      path.push(['L', point.x, point.y]);\n    });\n    path.push(['L', points[points.length - 1].x, points[points.length - 1].y - lineLength]);\n    this.addShape(group, {\n      type: 'path',\n      id: this.getElementId('region'),\n      name: 'annotation-region',\n      attrs: __assign({\n        path: path\n      }, regionStyle)\n    });\n    // render text\n    var textCfg = __assign({\n      id: this.getElementId('text'),\n      name: 'annotation-text',\n      x: (bbox.minX + bbox.maxX) / 2,\n      y: bbox.minY - lineLength\n    }, this.get('text'));\n    renderTag(group, textCfg);\n  };\n  return DataRegionAnnotation;\n}(GroupComponent);\nexport default DataRegionAnnotation;","map":null,"metadata":{},"sourceType":"module"}