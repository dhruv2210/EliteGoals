{"version":3,"file":"index.es.js","sources":["../src/core.ts","../src/effect.ts"],"sourcesContent":["import { useCallback, useEffect, useRef } from 'react';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype Args = any[];\n\nexport const useAnimationFrame = <Fn extends (...args: Args) => void>(\n  callback: Fn,\n  wait = 0,\n): ((...args: Parameters<Fn>) => void) => {\n  const rafId = useRef(0);\n\n  const render = useCallback(\n    (...args: Parameters<Fn>) => {\n      // Reset previous animation before start new animation\n      cancelAnimationFrame(rafId.current);\n\n      const timeStart = performance.now();\n\n      const renderFrame = (timeNow: number) => {\n        // Call next rAF if time is not up\n        if (timeNow - timeStart < wait) {\n          rafId.current = requestAnimationFrame(renderFrame);\n          return;\n        }\n\n        callback(...args);\n      };\n\n      rafId.current = requestAnimationFrame(renderFrame);\n    },\n    [callback, wait],\n  );\n\n  // Call cancel animation after umount\n  // Stryker disable next-line ArrayDeclaration\n  useEffect(() => () => cancelAnimationFrame(rafId.current), []);\n\n  return render;\n};\n","import { useRef, useEffect, EffectCallback, DependencyList } from 'react';\nimport { useAnimationFrame } from './core';\n\n// Stryker disable next-line ArrayDeclaration\nconst defaultDeps: DependencyList = [];\n\n/**\n *\n * @param fn - Debounce callback.\n * @param wait - Number of milliseconds to delay.\n * @param deps - Array values that the debounce depends (like as useEffect).\n */\nconst useDebouncy = (\n  fn: EffectCallback,\n  wait = 0,\n  deps = defaultDeps,\n): void => {\n  const isFirstRender = useRef(true);\n  const render = useAnimationFrame(fn, wait);\n\n  // Call update if deps changes\n  useEffect(() => {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n\n    render();\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, deps);\n};\n\nexport default useDebouncy;\n"],"names":["useAnimationFrame","callback","wait","rafId","useRef","render","useCallback","args","cancelAnimationFrame","current","timeStart","performance","now","renderFrame","timeNow","requestAnimationFrame","useEffect","defaultDeps","useDebouncy","fn","deps","isFirstRender"],"mappings":"+DAKA,MAAAA,EAAA,CACAC,EACAC,EAAA,KAEA,MAAAC,EAAAC,EAAA,GAEAC,EAAAC,EACA,IAAAC,KAEAC,qBAAAL,EAAAM,SAEA,MAAAC,EAAAC,YAAAC,MAEAC,EAAAC,IAEAA,EAAAJ,EAAAR,EACAC,EAAAM,QAAAM,sBAAAF,GAIAZ,KAAAM,IAGAJ,EAAAM,QAAAM,sBAAAF,IAEA,CAAAZ,EAAAC,IAOA,OAFAc,EAAA,IAAA,IAAAR,qBAAAL,EAAAM,SAAA,IAEAJ,GCjCAY,EAAA,GAQAC,EAAA,CACAC,EACAjB,EAAA,EACAkB,EAAAH,KAEA,MAAAI,EAAAjB,GAAA,GACAC,EAAAL,EAAAmB,EAAAjB,GAGAc,EAAA,KACAK,EAAAZ,QACAY,EAAAZ,SAAA,EAIAJ,KAGAe"}