"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createRendererContainer = createRendererContainer;
exports.isEventCrash = isEventCrash;
var _l7Utils = require("@antv/l7-utils");
var containerCounter = 0;
function createRendererContainer(domId) {
  if (_l7Utils.isMini) {
    return null;
  }
  var $wrapper = domId;
  if (typeof domId === 'string') {
    $wrapper = document.getElementById(domId);
  }
  if ($wrapper) {
    var $container = document.createElement('div');
    $container.style.cssText += "\n      position: absolute;\n      z-index:2;\n      height: 100%;\n      width: 100%;\n      pointer-events: none;\n    ";
    $container.id = "l7-scene-".concat(containerCounter++);
    $container.classList.add('l7-scene');
    $wrapper.appendChild($container);
    return $container;
  }
  return null;
}

/**
 * 检测触发事件是否是在 marker/popup 上发生，若是则会发生冲突（发生冲突时 marker/popup 事件优先）
 * @param layerEvent
 * @returns
 */
function isEventCrash(layerEvent) {
  var _layerEvent$target;
  var notCrash = true;
  // 获取图层鼠标事件中对应点击的 DOM 元素
  if ((layerEvent === null || layerEvent === void 0 ? void 0 : (_layerEvent$target = layerEvent.target) === null || _layerEvent$target === void 0 ? void 0 : _layerEvent$target.target) instanceof HTMLElement) {
    var _layerEvent$target2;
    var currentElement = layerEvent === null || layerEvent === void 0 ? void 0 : (_layerEvent$target2 = layerEvent.target) === null || _layerEvent$target2 === void 0 ? void 0 : _layerEvent$target2.target;
    while (currentElement) {
      var _currentElement;
      var classList = Array.from(currentElement.classList);
      if (classList.includes('l7-marker') || classList.includes('l7-popup')) {
        notCrash = false;
        break;
      }
      currentElement = (_currentElement = currentElement) === null || _currentElement === void 0 ? void 0 : _currentElement.parentElement;
    }
  }
  return notCrash;
}