{"version":3,"sources":["../../src/webgpu/WebGPUAttribute.ts"],"names":["WebGPUAttribute","engine","options","attribute","buffer","offset","stride","normalized","size","divisor","arrayStride","attributes","stepMode","get","subData","destroy"],"mappings":";;;IASqBA,e;AAcnB,2BACUC,MADV,EAEUC,OAFV,EAGE;AAAA;;AAAA,SAFQD,MAER,GAFQA,MAER;AAAA,SADQC,OACR,GADQA,OACR;AAAA,SAhBMC,SAgBN;AAAA,SALMC,MAKN;AAAA,mBAWIF,OAXJ;AAAA,QAEEE,MAFF,YAEEA,MAFF;AAAA,QAGEC,MAHF,YAGEA,MAHF;AAAA,QAIEC,MAJF,YAIEA,MAJF;AAAA,QAKEC,UALF,YAKEA,UALF;AAAA,QAMEC,IANF,YAMEA,IANF;AAAA,QAOEC,OAPF,YAOEA,OAPF;AAAA,QAQEC,WARF,YAQEA,WARF;AAAA,QASEC,UATF,YASEA,UATF;AAAA,QAUEC,QAVF,YAUEA,QAVF;AAYA,SAAKR,MAAL,GAAcA,MAAd;AACA,SAAKD,SAAL,GAAiB;AACfC,MAAAA,MAAM,EAAGA,MAAD,CAAyBS,GAAzB,EADO;AAEfR,MAAAA,MAAM,EAAEA,MAAM,IAAI,CAFH;AAGfC,MAAAA,MAAM,EAAEA,MAAM,IAAI,CAHH;AAIfC,MAAAA,UAAU,EAAEA,UAAU,IAAI,KAJX;AAKfE,MAAAA,OAAO,EAAEA,OAAO,IAAI,CALL;AAMfC,MAAAA,WAAW,EAAEA,WAAW,IAAI,CANb;AAOf;AACAC,MAAAA,UAAU,EAAVA,UARe;AASfC,MAAAA,QAAQ,EAAEA,QAAQ,IAAI;AATP,KAAjB;;AAYA,QAAIJ,IAAJ,EAAU;AACR,WAAKL,SAAL,CAAeK,IAAf,GAAsBA,IAAtB;AACD;AACF;;;;0BAEY;AACX,aAAO,KAAKL,SAAZ;AACD;;;iCAEmBD,O,EAKjB;AACD,WAAKE,MAAL,CAAYU,OAAZ,CAAoBZ,OAApB;AACD;;;8BAEgB;AACf,WAAKE,MAAL,CAAYW,OAAZ;AACD;;;;;;SA9DkBf,e","sourcesContent":["import {\n  BufferData,\n  IAttribute,\n  IAttributeInitializationOptions,\n  IBuffer,\n} from '@antv/g-webgpu-core';\nimport { WebGPUEngine } from '.';\nimport WebGPUBuffer from './WebGPUBuffer';\n\nexport default class WebGPUAttribute implements IAttribute {\n  private attribute: {\n    buffer: GPUBuffer;\n    offset: number;\n    stride: number;\n    normalized: boolean;\n    divisor: number;\n    size?: number;\n    arrayStride: number;\n    stepMode: GPUInputStepMode;\n    attributes: Iterable<GPUVertexAttributeDescriptor>;\n  };\n  private buffer: IBuffer;\n\n  constructor(\n    private engine: WebGPUEngine,\n    private options: IAttributeInitializationOptions,\n  ) {\n    const {\n      buffer,\n      offset,\n      stride,\n      normalized,\n      size,\n      divisor,\n      arrayStride,\n      attributes,\n      stepMode,\n    } = options;\n    this.buffer = buffer;\n    this.attribute = {\n      buffer: (buffer as WebGPUBuffer).get(),\n      offset: offset || 0,\n      stride: stride || 0,\n      normalized: normalized || false,\n      divisor: divisor || 0,\n      arrayStride: arrayStride || 0,\n      // @ts-ignore\n      attributes,\n      stepMode: stepMode || 'vertex',\n    };\n\n    if (size) {\n      this.attribute.size = size;\n    }\n  }\n\n  public get() {\n    return this.attribute;\n  }\n\n  public updateBuffer(options: {\n    // 用于替换的数据\n    data: BufferData;\n    // 原 Buffer 替换位置，单位为 byte\n    offset: number;\n  }) {\n    this.buffer.subData(options);\n  }\n\n  public destroy() {\n    this.buffer.destroy();\n  }\n}\n"],"file":"WebGPUAttribute.js"}