import { __assign, __extends } from "tslib";
import { uniqueId } from '@antv/util';
import { PolygonLayer } from '@antv/l7-layers';
import { PlotLayer } from '../../core/layer/plot-layer';
import { mappingLayer } from './adaptor';
import { getColorLegendItems } from '../dot-layer/helper';
var DEFAULT_OPTIONS = {};
var LAYER_OPTIONS_KEYS = ['color', 'size', 'style', 'state'];
var PrismLayer = /** @class */ (function (_super) {
    __extends(PrismLayer, _super);
    function PrismLayer(options) {
        var _this = _super.call(this, options) || this;
        /**
         * 图层类型
         */
        _this.type = PlotLayer.LayerType.PrismLayer;
        /**
         * 图层是否具有交互属性
         */
        _this.interaction = true;
        var _a = _this.options, name = _a.name, source = _a.source;
        var config = _this.pickLayerConfig(_this.options);
        _this.name = name ? name : uniqueId(_this.type);
        _this.layer = new PolygonLayer(__assign(__assign({}, config), { name: _this.name }));
        _this.mappingLayer(_this.layer, _this.options);
        _this.setSource(source);
        return _this;
    }
    /**
     * 获取默认配置
     */
    PrismLayer.prototype.getDefaultOptions = function () {
        return DEFAULT_OPTIONS;
    };
    PrismLayer.prototype.mappingLayer = function (layer, options) {
        mappingLayer(layer, options);
    };
    PrismLayer.prototype.update = function (options) {
        _super.prototype.update.call(this, options);
        this.mappingLayer(this.layer, this.options);
    };
    PrismLayer.prototype.getColorLegendItems = function () {
        var colorLegendItems = this.layer.getLegendItems('color');
        if (Array.isArray(colorLegendItems) && colorLegendItems.length !== 0) {
            var items = getColorLegendItems(colorLegendItems);
            return items;
        }
        return [];
    };
    /**
     * 默认配置项
     */
    PrismLayer.DefaultOptions = DEFAULT_OPTIONS;
    /**
     * 图层配置项 Keys
     */
    PrismLayer.LayerOptionsKeys = PlotLayer.LayerConfigkeys.concat(LAYER_OPTIONS_KEYS);
    return PrismLayer;
}(PlotLayer));
export { PrismLayer };
//# sourceMappingURL=index.js.map