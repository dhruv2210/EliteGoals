import { pick, isUndefined } from '@antv/util';
import * as topojson from 'topojson-client';
import { GEO_AREA_URL } from './constants';
export var getGeoAreaConfig = function (geoArea) {
    var config = { url: GEO_AREA_URL, type: 'topojson', extension: 'topo.json' };
    if (isUndefined(geoArea))
        return config;
    if (typeof geoArea === 'string') {
        config.url = geoArea;
    }
    else {
        config.url = (geoArea === null || geoArea === void 0 ? void 0 : geoArea.url) || GEO_AREA_URL;
        config.type = geoArea.type;
        config.extension = geoArea.type === 'topojson' ? 'topo.json' : 'json';
    }
    return config;
};
export var topojson2geojson = function (json) {
    try {
        var geojson = topojson.feature(json, 'json');
        return geojson;
    }
    catch (err) {
        throw new Error('Failed convert to geojson from topojson, topojson default layer name "json"');
    }
};
export var isEqualDrillSteps = function (newSteps, oldSteps) {
    if (newSteps.length !== oldSteps.length) {
        return false;
    }
    for (var index = 0; index < newSteps.length; index++) {
        var _a = newSteps[index], level = _a.level, granularity = _a.granularity;
        if (oldSteps[index].level !== level || oldSteps[index].granularity !== granularity) {
            return false;
        }
    }
    return true;
};
export var getDrillStepDefaultConfig = function (options) {
    var config = pick(options, ['source', 'color', 'style', 'state', 'label', 'tooltip']);
    return config;
};
//# sourceMappingURL=helper.js.map